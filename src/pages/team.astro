---
import Base from '@/layouts/Base.astro';
import PageHeader from '@/components/PageHeader.astro';
import CallToAction from '@/components/CallToAction.astro';
import { getCollection, getEntry } from 'astro:content';

const teamMembers = await getCollection('team');
const sortedTeam = teamMembers.sort((a, b) => a.data.order - b.data.order);

const teamPage = await getEntry('pages', 'team');
const testimonials = teamPage?.data?.testimonials || [];
---
<Base title="Team - Agile">
  
<PageHeader title="Team" />

<section class="section">
  <div class="container">
    <div class="lg:col-6 mx-auto mb-12">
      <h2 class="text-center">Meet the agile experienced Leadership Team</h2>
    </div>

    <div class="row g-4">
      {sortedTeam.map((member) => (
        <div class="lg:col-4 md:col-6">
          <div
            class="flex hover:shadow transition-shadow duration-300 flex-col items-center justify-center rounded-lg bg-theme-light px-9 py-14 text-center">
            <img loading="lazy" width="100" height="100" class="mb-5 flex-none rounded bg-white" src={member.data.image}
              alt={member.data.name}>
            <h4 class="mb-2 text-primary">{member.data.name}</h4>
            <h5 class="mb-6 text-text">{member.data.title}</h5>
            <p>{member.data.bio}</p>
            {member.data.social && (
              <ul class="mt-9 flex space-x-4">
                {member.data.social.facebook && (
                  <li>
                    <a class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-2xl text-theme-light shadow transition-colors duration-300 hover:bg-theme-light hover:text-primary"
                      href={member.data.social.facebook} target="_blank">
                      <i class="fa-brands fa-facebook-f"></i>
                    </a>
                  </li>
                )}
                {member.data.social.instagram && (
                  <li>
                    <a class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-2xl text-theme-light shadow transition-colors duration-300 hover:bg-theme-light hover:text-primary"
                      href={member.data.social.instagram} target="_blank">
                      <i class="fa-brands fa-instagram"></i>
                    </a>
                  </li>
                )}
                {member.data.social.twitter && (
                  <li>
                    <a class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-2xl text-theme-light shadow transition-colors duration-300 hover:bg-theme-light hover:text-primary"
                      href={member.data.social.twitter} target="_blank">
                      <i class="fa-brands fa-twitter"></i>
                    </a>
                  </li>
                )}
                {member.data.social.linkedin && (
                  <li>
                    <a class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-2xl text-theme-light shadow transition-colors duration-300 hover:bg-theme-light hover:text-primary"
                      href={member.data.social.linkedin} target="_blank">
                      <i class="fa-brands fa-linkedin-in"></i>
                    </a>
                  </li>
                )}
              </ul>
            )}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<!-- Testimonials Section -->
{testimonials.length > 0 && (
<section class="section">
  <div class="container">
    <div class="lg:col-6 mx-auto mb-12">
      <h2 class="text-center">What our employees have to say</h2>
    </div>
    <div class="swiper testimonial-swiper">
      <div class="swiper-wrapper">
        {testimonials.map((testimonial) => (
          <div class="swiper-slide">
            <div class="flex max-w-[800px] flex-col items-center justify-center mx-auto">
              <img loading="lazy" width="120" height="120" class="mb-5 flex-none rounded" src={testimonial.image}
                alt={testimonial.name}>
              <blockquote class="text-center mb-6 text-xl italic">
                "{testimonial.quote}"
              </blockquote>
              <h5 class="text-primary">{testimonial.name}</h5>
              <p class="text-light">{testimonial.role}</p>
            </div>
          </div>
        ))}
      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>
)}

<CallToAction />
  
</Base>
