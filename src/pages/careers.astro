---
import Base from '@/layouts/Base.astro';
import PageHeader from '@/components/PageHeader.astro';
import CallToAction from '@/components/CallToAction.astro';
import { getCollection, getEntry } from 'astro:content';

const careersPage = await getEntry('pages', 'careers');
const { data } = careersPage;
const benefits = data.benefits || [];

const jobs = await getCollection('careers', ({ data }) => !data.draft);
---
<Base title={data.meta_title || data.title}>
  
<PageHeader title="Careers" />

<section class="section">
  <div class="container">
    <div class="mx-auto text-center lg:col-4">
      <h2 class="mb-4">Why Work With Us?</h2>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit nihilmaxime
        corporis cumque totam aliquidm sint laborum officiis psum quidem?
      </p>
    </div>

    <div class="g-4 row mt-8">
      {benefits.map((benefit) => (
        <div class="md:col-6 lg:col-4">
          <div class="rounded px-6 py-8 text-center shadow hover:shadow-lg transition-all duration-400">
            <div
              class="mx-auto mb-7 flex h-20 w-20 items-center justify-center rounded bg-white text-5xl text-primary shadow">
              <i class={benefit.icon}></i>
            </div>
            <h3 class="mb-3 text-h3-sm">{benefit.title}</h3>
            <p>{benefit.description}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="mx-auto text-center lg:col-6">
      <h2 class="mb-4">We Take Care of Our Team</h2>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
    </div>
  </div>
</section>

<section class="section pt-0">
  <div class="container">
    <div class="mx-auto text-center lg:col-6 mb-12">
      <h2 class="mb-4">Open Positions</h2>
      <p>Join our team and help build the future of SaaS management.</p>
    </div>

    <div class="space-y-4">
      {jobs.map((job) => (
        <div class="rounded-lg border border-primary/20 p-6 hover:shadow-lg transition-all duration-300">
          <div class="flex flex-wrap items-center justify-between gap-4">
            <div>
              <h3 class="text-xl font-semibold text-primary mb-2">{job.data.title}</h3>
              <div class="flex flex-wrap gap-3 text-sm text-light">
                <span class="flex items-center gap-1">
                  <i class="fa-solid fa-building"></i> {job.data.department}
                </span>
                <span class="flex items-center gap-1">
                  <i class="fa-solid fa-location-dot"></i> {job.data.location}
                </span>
                <span class="flex items-center gap-1">
                  <i class="fa-solid fa-clock"></i> {job.data.type}
                </span>
                <span class="flex items-center gap-1">
                  <i class="fa-solid fa-briefcase"></i> {job.data.experience}
                </span>
              </div>
            </div>
            <a href={`/career-single`} class="btn btn-primary">Apply Now</a>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<CallToAction />

</Base>
